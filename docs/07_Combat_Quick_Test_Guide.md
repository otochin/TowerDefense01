# 戦闘動作確認 クイックテストガイド

## 概要

敵とプレイヤーキャラクターの戦闘が正常に動作するかを素早く確認するためのガイドです。

## クイックテスト手順

### ステップ1: 基本設定の確認

1. **プレイヤーキャラクターのタグ確認**
   - `Character_Warrior.prefab`を選択
   - Tagが`Player`に設定されているか確認

2. **敵のタグ確認**
   - `Enemy_Orc.prefab`を選択
   - Tagが`Enemy`に設定されているか確認

3. **Collider2Dの確認**
   - 両方のプレハブに`Collider2D`がアタッチされているか確認
   - Colliderのサイズが適切か確認（少なくとも1x1以上）

### ステップ2: シーンでの動作確認

1. **シーンを再生**
   - Playボタンを押す

2. **プレイヤーキャラクターを召喚**
   - 画面下部のキャラクターボタンをクリック
   - Warriorを召喚

3. **敵をスポーン**
   - `EnemySpawner`が動作していることを確認
   - 敵が左方向へ移動することを確認

4. **戦闘の確認**
   - プレイヤーキャラクターと敵が接近するまで待つ
   - 両者が停止することを確認
   - Consoleに攻撃ログが表示されることを確認
   - HPが減少することを確認

### ステップ3: デバッグ機能の使用

1. **攻撃範囲の可視化**
   - Sceneビューでキャラクターまたは敵を選択
   - 赤い円（Warrior）または黄色い円（Enemy）が表示される
   - これが攻撃範囲です

2. **Consoleログの確認**
   - `Window` → `General` → `Console`を開く
   - 以下のログが表示されることを確認：
     - `[Warrior] Warrior attacked ... for X damage!`
     - `[Enemy_Orc] Orc attacked ... for X damage!`

## よくある問題と解決方法

### 問題1: キャラクターが攻撃しない

**確認項目**:
- Collider2Dがアタッチされているか
- タグが正しく設定されているか
- 攻撃範囲が適切か（`CharacterData`/`EnemyData`の`Attack Range`を確認）

**解決方法**:
1. Collider2Dを追加（`Box Collider2D`または`Circle Collider2D`）
2. Tagを設定（`Player`または`Enemy`）
3. `Attack Range`を大きくする（例: 1.5 → 2.0）

### 問題2: ダメージが与えられない

**確認項目**:
- `HealthSystem`がアタッチされているか
- `IDamageable`インターフェースが実装されているか

**解決方法**:
- `CharacterBase`と`EnemyBase`は自動的に`HealthSystem`を追加します
- プレハブに`CharacterBase`/`EnemyBase`がアタッチされているか確認

### 問題3: 移動が停止しない

**確認項目**:
- `CharacterMovementController`/`EnemyController`がアタッチされているか
- 攻撃範囲内に敵/ターゲットがいるか

**解決方法**:
- Sceneビューで攻撃範囲（Gizmos）を確認
- 敵/ターゲットが攻撃範囲内に入っているか確認

## テストシナリオ

### シナリオ1: 1対1の戦闘
1. Warriorを1体召喚
2. Enemy_Orcを1体スポーン
3. 両者が接近して戦闘開始
4. どちらかが死亡するまで待つ
5. 正常に動作するか確認

### シナリオ2: 複数対複数の戦闘
1. Warriorを3体召喚
2. Enemy_Orcを3体スポーン
3. 戦闘が正常に動作するか確認
4. 各ユニットが適切なターゲットを選択しているか確認

### シナリオ3: 城への攻撃
1. 敵をスポーン
2. 敵がプレイヤー城に到達するまで待つ
3. 敵が城を攻撃するか確認
4. 城のHPが減少するか確認

## 確認すべきポイント

- [ ] プレイヤーキャラクターが敵を検出する
- [ ] 敵がプレイヤーキャラクターを検出する
- [ ] 攻撃時に移動が停止する
- [ ] 攻撃クールダウンが正しく動作する
- [ ] ダメージが正しく計算される
- [ ] HPが減少する
- [ ] 死亡時にオブジェクトが破棄される
- [ ] ターゲットが死亡すると移動を再開する

## 次のステップ

戦闘動作確認が完了したら：
1. バランス調整（HP、攻撃力、防御力、攻撃速度）
2. 投射物システムの実装（Archer、Mage用）
3. エフェクトの追加
